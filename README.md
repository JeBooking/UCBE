# Universal Comments - é€šç”¨ç½‘é¡µè¯„è®ºæ’ä»¶

ä¸€ä¸ªä¸ºæ‰€æœ‰ç½‘é¡µæ·»åŠ è¯„è®ºåŠŸèƒ½çš„æµè§ˆå™¨æ’ä»¶ï¼Œè®©ç”¨æˆ·å¯ä»¥åœ¨ä»»ä½•ç½‘ç«™ä¸ŠæŸ¥çœ‹å’Œå‘è¡¨è¯„è®ºã€‚

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

- **é€šç”¨è¯„è®ºç³»ç»Ÿ** - ä¸ºä»»ä½•ç½‘é¡µæ·»åŠ è¯„è®ºåŠŸèƒ½
- **å®æ—¶åŒæ­¥** - å¤šç”¨æˆ·å®æ—¶æŸ¥çœ‹è¯„è®ºæ›´æ–°
- **ç”¨æˆ·èº«ä»½è¯†åˆ«** - åŸºäºè®¾å¤‡æŒ‡çº¹çš„ç”¨æˆ·è¯†åˆ«ç³»ç»Ÿ
- **ç‚¹èµå’Œå›å¤** - æ”¯æŒè¯„è®ºç‚¹èµå’Œå¤šçº§å›å¤
- **æ ·å¼éš”ç¦»** - ç¡®ä¿æ’ä»¶UIä¸å—ç½‘ç«™æ ·å¼å½±å“
- **è·¨åŸŸæ”¯æŒ** - å®‰å…¨çš„è·¨åŸŸAPIé€šä¿¡
- **æ‹–æ‹½ç•Œé¢** - å¯æ‹–æ‹½çš„è¯„è®ºé¢æ¿

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯ï¼ˆæµè§ˆå™¨æ’ä»¶ï¼‰
- **Manifest V3** - Chrome/Edge æ’ä»¶æ ‡å‡†
- **React + TypeScript** - ç°ä»£åŒ–UIæ¡†æ¶
- **Webpack** - æ¨¡å—æ‰“åŒ…å·¥å…·
- **CSSéš”ç¦»** - é˜²æ­¢æ ·å¼å†²çª

### åç«¯æœåŠ¡
- **Node.js + Express** - RESTful APIæœåŠ¡
- **TypeScript** - ç±»å‹å®‰å…¨å¼€å‘
- **Supabase** - æ•°æ®åº“å’Œå®æ—¶åŠŸèƒ½
- **PostgreSQL** - å…³ç³»å‹æ•°æ®åº“

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
comment_website/
â”œâ”€â”€ src/                    # æ’ä»¶å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ components/         # Reactç»„ä»¶
â”‚   â”œâ”€â”€ content/           # Content Script
â”‚   â”œâ”€â”€ popup/             # æ’ä»¶å¼¹å‡ºé¡µé¢
â”‚   â”œâ”€â”€ types/             # TypeScriptç±»å‹å®šä¹‰
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ server/                # åç«¯APIæœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/        # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ services/      # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ middleware/    # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ config/        # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ database/              # æ•°æ®åº“æ¶æ„
â”œâ”€â”€ manifest.json          # æ’ä»¶é…ç½®æ–‡ä»¶
â””â”€â”€ package.json           # å‰ç«¯ä¾èµ–é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿ä½ å·²å®‰è£…ï¼š
- Node.js (v16+)
- npm æˆ– yarn
- Supabase è´¦æˆ·

### 2. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd comment_website
```

### 3. å®‰è£…ä¾èµ–

```bash
# å®‰è£…å‰ç«¯ä¾èµ–
npm install

# å®‰è£…åç«¯ä¾èµ–
cd server
npm install
```

### 4. é…ç½®æ•°æ®åº“

1. åœ¨ [Supabase](https://supabase.com) åˆ›å»ºæ–°é¡¹ç›®
2. åœ¨ SQL ç¼–è¾‘å™¨ä¸­æ‰§è¡Œ `database/schema.sql`
3. å¤åˆ¶ `server/.env.example` ä¸º `server/.env`
4. å¡«å…¥ä½ çš„ Supabase é…ç½®ï¼š

```env
SUPABASE_URL=your_supabase_url_here
SUPABASE_ANON_KEY=your_supabase_anon_key_here
PORT=3000
NODE_ENV=development
```

### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¯åŠ¨åç«¯æœåŠ¡
cd server
npm run dev

# åœ¨æ–°ç»ˆç«¯å¯åŠ¨å‰ç«¯æ„å»º
cd ..
npm run dev
```

### 6. å®‰è£…æµè§ˆå™¨æ’ä»¶

1. æ‰“å¼€ Chrome æµè§ˆå™¨
2. è®¿é—® `chrome://extensions/`
3. å¼€å¯"å¼€å‘è€…æ¨¡å¼"
4. ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
5. é€‰æ‹©é¡¹ç›®æ ¹ç›®å½•

## ğŸ”§ å¼€å‘æŒ‡å—

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»ºå‰ç«¯
npm run build

# æ„å»ºåç«¯
cd server
npm run build
```

### æ•°æ®åº“ç®¡ç†

```sql
-- æŸ¥çœ‹è¯„è®ºç»Ÿè®¡
SELECT * FROM comment_statistics;

-- æ¸…ç†å­¤ç«‹ç”¨æˆ·
SELECT cleanup_orphaned_users();

-- æŸ¥çœ‹å¸¦ç‚¹èµæ•°çš„è¯„è®º
SELECT * FROM comments_with_likes WHERE url = 'https://example.com';
```

### API ç«¯ç‚¹

- `GET /api/comments?url=<page_url>` - è·å–é¡µé¢è¯„è®º
- `POST /api/comments` - åˆ›å»ºæ–°è¯„è®º
- `POST /api/comments/:id/like` - åˆ‡æ¢ç‚¹èµçŠ¶æ€
- `DELETE /api/comments/:id` - åˆ é™¤è¯„è®º

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

- **è¾“å…¥éªŒè¯** - ä¸¥æ ¼çš„æ•°æ®éªŒè¯å’Œæ¸…ç†
- **é™æµä¿æŠ¤** - é˜²æ­¢APIæ»¥ç”¨
- **CORSé…ç½®** - å®‰å…¨çš„è·¨åŸŸè®¿é—®æ§åˆ¶
- **SQLæ³¨å…¥é˜²æŠ¤** - ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
- **XSSé˜²æŠ¤** - å†…å®¹è½¬ä¹‰å’ŒCSPç­–ç•¥

## ğŸ“± ç”¨æˆ·æŒ‡å—

### ä½¿ç”¨æ’ä»¶

1. ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ ä¸­çš„æ’ä»¶å›¾æ ‡
2. è®¾ç½®ä½ çš„ç”¨æˆ·å
3. ç‚¹å‡»"æ˜¾ç¤ºè¯„è®º"æŒ‰é’®
4. åœ¨ä»»ä½•ç½‘é¡µä¸ŠæŸ¥çœ‹å’Œå‘è¡¨è¯„è®º

### åŠŸèƒ½è¯´æ˜

- **å‘è¡¨è¯„è®º** - åœ¨è¯„è®ºæ¡†ä¸­è¾“å…¥å†…å®¹å¹¶ç‚¹å‡»å‘å¸ƒ
- **å›å¤è¯„è®º** - ç‚¹å‡»è¯„è®ºä¸‹æ–¹çš„"å›å¤"æŒ‰é’®
- **ç‚¹èµè¯„è®º** - ç‚¹å‡»â¤ï¸å›¾æ ‡ä¸ºè¯„è®ºç‚¹èµ
- **åˆ é™¤è¯„è®º** - åªèƒ½åˆ é™¤è‡ªå·±å‘è¡¨çš„è¯„è®º
- **æ‹–æ‹½é¢æ¿** - æ‹–æ‹½è¯„è®ºé¢æ¿æ ‡é¢˜æ æ¥ç§»åŠ¨ä½ç½®

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ› é—®é¢˜åé¦ˆ

å¦‚æœä½ å‘ç°äº†bugæˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œè¯·åœ¨ [Issues](../../issues) é¡µé¢æäº¤ã€‚

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ç»´æŠ¤è€…ï¼š[Your Name]
- é‚®ç®±ï¼š[your.email@example.com]
- é¡¹ç›®é“¾æ¥ï¼š[https://github.com/yourusername/universal-comments]
